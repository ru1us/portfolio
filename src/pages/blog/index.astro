---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
const sortedPosts = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---
<Layout title="Blog — Overview">
  <h1 class="text-3xl font-bold mb-6">Blog / Projects</h1>

  {posts.length === 0 && (
    <p class="text-slate-500">No posts found. Check if the markdown files are in the correct folder.</p>
  )}

  <div class="grid md:grid-cols-2 gap-6">
    {sortedPosts.map((post) => (
      <article class="bg-white p-6 rounded shadow">
        <h3 class="text-xl font-semibold mb-2">
          <a href={`/blog/${post.slug}`} class="text-slate-900">{post.data.title}</a>
        </h3>
        <p class="text-sm text-slate-500 mb-3">{new Date(post.data.date).toLocaleDateString('en-US')}</p>
        <p class="text-slate-700">{post.data.summary}</p>
        <a class="inline-block mt-3 text-blue-600" href={`/blog/${post.slug}`}>Read more →</a>
      </article>
    ))}
  </div>
</Layout>
